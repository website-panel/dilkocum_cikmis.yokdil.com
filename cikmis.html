<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elektronik Sƒ±nav Uygulamasƒ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .no-select { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #ccc; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #aaa; }
        .question-text mark { background-color: #fff59d; border-radius: 3px; padding: 0 2px; cursor: pointer; }
    </style>
</head>
<body class="bg-slate-100">

    <div id="app-container">
        <!-- SINAV ARAY√úZ√ú -->
        <div id="sinav-arayuzu" class="flex flex-col min-h-screen">
            <header class="bg-slate-800 text-white shadow-md sticky top-0 z-40">
                <div class="container mx-auto px-4 py-3 text-center">
                    <h1 class="text-xl font-bold">Elektronik Sƒ±nav Uygulamasƒ±</h1>
                </div>
            </header>
            <div class="bg-white border-b border-slate-200 sticky top-[61px] z-40">
                <div class="container mx-auto px-4 py-2 flex flex-wrap justify-between items-center gap-4">
                     <div class="user-info flex items-center gap-3">
                        <svg class="w-10 h-10 text-slate-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"/></svg>
                        <div class="user-details"><strong class="kullanici-ad-soyad font-semibold text-slate-700">Y√ºkleniyor...</strong></div>
                    </div>
                    <div class="time-info flex items-center gap-2">
                        <span class="time-label text-slate-500">Kalan S√ºre:</span>
                        <span id="main-exam-timer" class="time-box font-mono text-2xl font-bold text-red-600">--:--:--</span>
                    </div>
                    <div class="status-controls flex gap-2">
                         <button id="sinav-pdf-indir-btn" class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 flex items-center gap-2 transform hover:scale-105">üìÑ Sorularƒ± ƒ∞ndir</button>
                         <button id="sinav-sonlandir-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 flex items-center gap-2 transform hover:scale-105">üõë Sƒ±navƒ± Sonlandƒ±r</button>
                         <button id="sonuclara-don-btn" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 items-center gap-2 hidden transform hover:scale-105">üìä Sonu√ßlara D√∂n</button>
                    </div>
                </div>
            </div>

            <main class="container mx-auto px-4 py-8 flex-grow max-w-7xl">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <div class="lg:col-span-2 bg-white p-6 sm:p-8 rounded-2xl shadow-lg flex flex-col">
                        <div id="soru-icerik" class="flex-grow">
                            <!-- Soru i√ßeriƒüi buraya dinamik olarak gelecek -->
                        </div>
                        <div class="flex justify-between mt-8 pt-6 border-t border-slate-200">
                            <button id="prev-btn" class="nav-button bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-3 px-6 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed no-select transform hover:scale-105 disabled:scale-100">‚Üê √ñnceki</button>
                            <button id="next-btn" class="nav-button bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed no-select transform hover:scale-105 disabled:scale-100">Sonraki ‚Üí</button>
                        </div>
                    </div>

                    <aside class="bg-white p-6 rounded-2xl shadow-lg lg:sticky lg:top-40">
                        <h3 class="text-xl font-bold text-center mb-4 pb-2 border-b-2 border-slate-200">Optik Form</h3>
                        <div id="optik-form-icerik" class="space-y-2 max-h-[calc(100vh-250px)] overflow-y-auto custom-scrollbar pr-2">
                            <!-- Optik form i√ßeriƒüi buraya dinamik olarak gelecek -->
                        </div>
                    </aside>
                </div>
            </main>
        </div>

        <!-- SONU√á ARAY√úZ√ú -->
        <div id="sonuc-arayuzu" class="hidden">
             <header class="bg-slate-800 text-white shadow-md">
                <div class="container mx-auto px-4 py-3 text-center">
                    <h1 class="text-xl font-bold">Sƒ±nav Sonu√ß Raporu: <span id="sonuc-kullanici-ad-soyad"></span></h1>
                </div>
            </header>
             <div class="container mx-auto px-4 py-8 max-w-4xl">
                <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg mb-6 border-l-8 border-sky-500">
                    <div class="flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-12">
                        <div class="text-center">
                            <p class="text-lg text-slate-500">Net Puanƒ±nƒ±z</p>
                            <p id="net-sayisi-buyuk" class="text-7xl font-bold text-slate-800">0.00</p>
                        </div>
                        <div class="w-full flex-1 max-w-xs space-y-3">
                            <div class="flex justify-between items-baseline text-lg">
                                <span class="font-semibold text-green-600">DOƒûRU</span>
                                <span id="dogru-sayisi" class="text-2xl font-bold text-green-600">0</span>
                            </div>
                             <div class="flex justify-between items-baseline text-lg">
                                <span class="font-semibold text-red-600">YANLI≈û</span>
                                <span id="yanlis-sayisi" class="text-2xl font-bold text-red-600">0</span>
                            </div>
                             <div class="flex justify-between items-baseline text-lg">
                                <span class="font-semibold text-slate-500">BO≈û</span>
                                <span id="bos-sayisi" class="text-2xl font-bold text-slate-500">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-2xl shadow-lg mb-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <button id="yeni-sinav-btn" class="bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center gap-2 transform hover:scale-105">üöÄ Yeni Sƒ±nava Ba≈üla</button>
                        <button id="sorulari-incele-btn" class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center gap-2 transform hover:scale-105">üîç Sorularƒ± ƒ∞ncele</button>
                        <button id="sonuc-pdf-indir-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center gap-2 transform hover:scale-105">üìÑ Kitap√ßƒ±ƒüƒ± ƒ∞ndir</button>
                        <button id="gecmis-sayfasina-git-btn" class="bg-slate-500 hover:bg-slate-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center gap-2 transform hover:scale-105">üìú T√ºm Ge√ßmi≈üim</button>
                    </div>
                 </div>
                 <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4 pb-2 border-b-2 border-slate-200">Cevap Anahtarƒ± ve Detaylar</h3>
                    <div id="optik-form-sonuc" class="space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2">
                        <!-- Sonu√ß optik formu buraya gelecek -->
                    </div>
                 </div>
             </div>
        </div>

        <!-- MODAL PENCERELER -->
        <div id="onay-popup" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-8 text-center transform transition-all scale-95 opacity-0">
                <h2 class="text-2xl font-bold mb-4 text-slate-800">Emin misiniz?</h2>
                <p id="onay-mesaji" class="text-slate-600 mb-6"></p>
                <div class="flex gap-4">
                    <button id="onay-iptal-btn" class="w-full bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-3 rounded-lg transition">ƒ∞ptal</button>
                    <button id="onay-devam-btn" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition">Evet, Onayla</button>
                </div>
            </div>
        </div>

        <div id="bilgi-popup" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
             <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-8 text-center transform transition-all scale-95 opacity-0">
                <h2 class="text-2xl font-bold mb-4 text-slate-800">Bilgi</h2>
                <p id="bilgi-mesaji" class="text-slate-600 mb-6"></p>
                <button id="bilgi-kapat-btn" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 rounded-lg transition">Tamam</button>
            </div>
        </div>

        <div id="sayac-popup" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-8 text-center transform transition-all scale-95 opacity-0">
                <h2 class="text-2xl font-bold mb-2 text-slate-800">Sonu√ßlar Hazƒ±rlanƒ±yor...</h2>
                <p class="text-slate-600 mb-4">L√ºtfen bekleyin, sonu√ßlarƒ±nƒ±z saniyeler i√ßinde g√∂r√ºnt√ºlenecek.</p>
                <div id="gerisayim-sayaci" class="text-7xl font-bold text-sky-500">10</div>
            </div>
        </div>

        <div id="soru-detay-popup" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
             <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl flex flex-col max-h-[90vh] transform transition-all scale-95 opacity-0">
                <div class="p-6 border-b border-slate-200">
                    <h3 id="soru-detay-baslik" class="text-xl font-bold text-slate-800"></h3>
                </div>
                <div class="p-6 flex-grow overflow-y-auto custom-scrollbar">
                    <div id="soru-detay-metin" class="bg-slate-100 p-4 rounded-lg mb-6 text-lg"></div>
                    <ul id="soru-detay-secenekler" class="space-y-3"></ul>
                </div>
                <div class="p-4 bg-slate-50 border-t border-slate-200 text-right rounded-b-2xl">
                    <button id="soru-detay-kapat-btn" class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded-lg transition">Kapat</button>
                </div>
             </div>
        </div>

    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import { getFirestore, collection, doc, getDoc, setDoc, addDoc, deleteDoc, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyAvaEaHtTwcuCDBIggJGd4w_nzJQM5UlmY", authDomain: "teacher-adminpanel.firebaseapp.com", projectId: "teacher-adminpanel", storageBucket: "teacher-adminpanel.appspot.com", messagingSenderId: "901735644134", appId: "1:901735644134:web:a6aa575a0754de1333f427", measurementId: "G-68BWZJYCK9" };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
 
        // --- SORU HAVUZU ---
const SORU_HAVUZU = [ 
{
        "metin": "---- a parent is advised so by the child‚Äôs physician, topical antibiotics should not be used on children under two months of age.",
        "secenekler": [
            "Since",
            "Unless",
            "Whereas",
            "As though",
            "In order that"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "‚Äã---- mushrooms are rich in protein like meat, their nutrient profile is quite different from that of meat.",
        "secenekler": [
            "Since",
            "Although",
            "Provided that",
            "Unless",
            "Once"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "In the prescribing information of a drug, the following must be included among others: a description of its active ingredient, precautions, adverse reactions and instructions on what to do ---- overdosage.",
        "secenekler": [
            "in case of",
            "for the sake of",
            "in terms of",
            "by means of",
            "except for"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "A study at the University of Glasgow involving almost 265,000 participants ---- that going to work by bike ---- your chance of dying from cardiovascular disease.",
        "secenekler": [
            "had found / is reducing",
            "has found / reduces",
            "found / will reduce",
            "finds / reduced",
            "would find / has reduced"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "A thyroid biopsy is usually required when a painless lump or a nodule is detected, ---- by the patient ---- by a doctor during a routine physical examination.",
        "secenekler": [
            "neither / nor",
            "either / or",
            "as / as",
            "no sooner / than",
            "the more / the more"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Biochemically, sodium is a vital nutrient for the human body ---- excesses of it can aggravate high blood pressure.",
        "secenekler": [
            "since",
            "although",
            "provided that",
            "once",
            "as if"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Mounting evidence ---- that Alzheimer's disease ---- caused by inflammatory immune response to pathogens that afflict brain tissue.",
        "secenekler": [
            "would suggest / had to be",
            "suggested / used to be",
            "had suggested / can be",
            "has suggested / will be",
            "suggests / could be"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "People who travel to tropical regions ---- community sanitation is generally poor may suffer from parasitic infections.",
        "secenekler": [
            "why",
            "where",
            "what",
            "who",
            "how"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- some bacteria are typically harmless, Pseudomonas bacteria that enter a damaged cornea can cause an infection, redness, pain and blurred vision.",
        "secenekler": [
            "Now that",
            "Even though",
            "Provided",
            "Once",
            "Only if"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Ibn Al-Nafis (1213‚Äì1288) was the Islamic physician who discovered the circulation of blood; however, his writings did not emerge into the mainstream of Western medicine for several centuries ---- there was little contact between East and West during his lifetime.",
        "secenekler": [
            "since",
            "although",
            "as long as",
            "even if",
            "once"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "To soothe eczema flare-ups or inflamed skin, dermatologists advise rubbing on a cream ---- contains ceramides or colloidal oatmeal after every handwashing.",
        "secenekler": [
            "when",
            "that",
            "where",
            "whose",
            "in which"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "The effects of foetal alcohol syndrome are linked with mental health and social interaction problems ---- learning difficulties.",
        "secenekler": [
            "in order to",
            "in contrast",
            "as though",
            "as well as",
            "despite"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Eating chocolate at least once a week could help to reduce the risk of heart disease by as much as 8 percent ---- the nutrients in the chocolate, such as flavonoids, reducing inflammation and increasing good cholesterol.",
        "secenekler": [
            "prior to",
            "other than",
            "similar to",
            "thanks to",
            "in spite of"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Joints are the structures where two or more bones come together, ---- directly ---- by means of strong fibrous cords called ligaments.",
        "secenekler": [
            "as / as",
            "either / or",
            "no sooner / than",
            "so / that",
            "the more / the more"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- most autoimmune diseases individually are rare, collectively they are among the most common diseases.",
        "secenekler": [
            "Once",
            "Whereas",
            "Because",
            "Provided that",
            "As long as"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Unlike black tea, which is linked to reduced risk of heart disease thanks to its antioxidants, herbal teas are made from herbs, spices, and fruit ---- the tea plant, so they offer different benefits.",
        "secenekler": [
            "in terms of",
            "by means of",
            "rather than",
            "thanks to",
            "such as"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Low-fat, flavoured yogurt ---- very high in added sugar and thickeners, so it ---- better to choose plain, whole-milk yogurt and blend it with fresh fruit or honey to get natural sweetness.",
        "secenekler": [
            "may be / has to be",
            "should be / had to be",
            "would be / must be",
            "used to be / could be",
            "can be / might be"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "---- everyone's brain loses volume over time, the shrinkage happens faster in people who have trouble sleeping than in those who are better rested.",
        "secenekler": [
            "Whereas",
            "Since",
            "As long as",
            "Once",
            "As if"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "---- the belief that avocados should be omitted from calorie-controlled diets, a 2013 study by nutrition scientists found that they can play a useful role.",
        "secenekler": [
            "Owing to",
            "Contrary to",
            "In terms of",
            "Similar to",
            "By means of"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "One of the important advantages of ultrasound is that it is a mechanical vibration and is therefore a non-ionising form of energy; ----, it is usable in many sensitive circumstances where X-rays might be damaging.",
        "secenekler": [
            "otherwise",
            "however",
            "thus",
            "similarly",
            "even so"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "---- you are intolerant to dairy ---- simply do not like the taste of cow's milk, you might be looking for a nutritious alternative, so Australia's pea milk could be the best option for you.",
        "secenekler": [
            "No sooner / than",
            "Such / that",
            "Whether / or",
            "The more / the more",
            "As / as"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "You ---- stretching many times, but you ---- of it as a key part of your workout, as stretching for 10-15 minutes post-workout relieves sore muscles.",
        "secenekler": [
            "must have skipped / could have thought",
            "should have skipped / have to think",
            "might have skipped / would have thought",
            "may have skipped / should think",
            "could have skipped / used to think"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Daytime tiredness can be attributed to a lack of sleep quality that people miss ---- they have a large quantity of sleep.",
        "secenekler": [
            "because",
            "even if",
            "once",
            "as long as",
            "whenever"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Any morbid change in the structure of an organ or a body part ---- injury or disease is called a lesion.",
        "secenekler": [
            "so",
            "despite",
            "moreover",
            "unlike",
            "due to"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "The nail matrix, which is the actively growing part of the nail, is ---- thick ---- the pink dermis cannot show through it.",
        "secenekler": [
            "as / as",
            "such / as",
            "so / that",
            "too / to",
            "much / than"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "People suffering from skin disorders ---- skin traction because the application of traction ---- their condition.",
        "secenekler": [
            "must not undergo / has aggravated",
            "cannot undergo / aggravated",
            "do not have to undergo / had aggravated",
            "may not undergo / has been aggravating",
            "should not undergo / will aggravate"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "---- the variety of ways celia disease can manifest itself, it is often not discovered easily.",
        "secenekler": [
            "Due to",
            "In terms of",
            "On behalf of",
            "With the help of",
            "Similar to"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Body mass index has long been used to measure obesity and health risk, ---- it cannot explain why an overweight person might be healthy or why a seemingly healthy person might get heart disease or diabetes.",
        "secenekler": [
            "as",
            "thus",
            "otherwise",
            "for example",
            "yet"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Findings of a recent study ---- that green tea and carrots ---- a part in fighting Alzheimer's disease, though there is need for more research.",
        "secenekler": [
            "had suggested / would play",
            "have suggested / should have played",
            "suggest / could play",
            "suggested / used to play",
            "are suggesting / will have played"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Researchers ---- that wearing a sleep tracking device to bed ---- people obsess over their sleep‚Äôs statistics, leading to a poor night‚Äôs rest.",
        "secenekler": [
            "had found / can make",
            "must find / would make",
            "have found / could make",
            "will find / ought to make",
            "can find / used to make"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "The causes of Attention Deficit Hyperactivity Disorder (ADHD) are not known; ----, it appears that heredity plays a major role in the development of the disorder.",
        "secenekler": [
            "similarly",
            "for instance",
            "however",
            "therefore",
            "accordingly"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Homeopathy relies on the principle that the same substances that cause disease can also cure it; ----, only the ultra-weakened forms of the substance are used as remedies.",
        "secenekler": [
            "however",
            "instead",
            "conversely",
            "otherwise",
            "overall"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Lycopene emerged in the 1990s as a secondary therapy for prostate-related illnesses and started to be used widely ---- its ability to slow the spread of malignant cells.",
        "secenekler": [
            "as well as",
            "in addition to",
            "because of",
            "such as",
            "as if"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Treatment options suggested for cold sores are limited; ----, doctors may prescribe antiviral medications for recurrent or severe episodes of cold sores.",
        "secenekler": [
            "likewise",
            "however",
            "by comparison",
            "moreover",
            "in other words"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- the beginning of the 21st century, researchers at Yale University have published a number of studies on patients with a low carbohydrate diet.",
        "secenekler": [
            "During",
            "Since",
            "Before",
            "Until",
            "When"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "There are viruses that are unfamiliar to our immune system, which means that ---- our natural defences ---- existing vaccines can protect us against them.",
        "secenekler": [
            "if / then",
            "as / well",
            "rather / than",
            "neither / nor",
            "such / that"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Unlike traditional vaccines, cancer vaccines do not prevent cancer; ----, they are designed to treat people who already have the disease.",
        "secenekler": [
            "instead",
            "otherwise",
            "for instance",
            "additionally",
            "as a result"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "---- any stage of the digestive process is kept from doing its job properly, the food cannot proceed to complete digestion.",
        "secenekler": [
            "Until",
            "So that",
            "Although",
            "Whenever",
            "Since"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Some 400 years after Hippocrates ----, Claudius Galenus of Pergamum ---- the most influential physician of his time.",
        "secenekler": [
            "was dying / will have become",
            "will die / had become",
            "dies / would become",
            "had died / has become",
            "died / became"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Functional Magnetic Resonance Imaging, a brain imaging technique that registers flow to functioning areas of the brain, shows what the brain is doing ---- how it looks.",
        "secenekler": [
            "as well as",
            "in case of",
            "such as",
            "in the absence of",
            "on behalf of"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Liposuction is not a generally recommended treatment for cellulite ---- it is an invasive and potentially life-threatening procedure.",
        "secenekler": [
            "whether",
            "because",
            "although",
            "whenever",
            "as though"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "A transient ischemic attack (TIA) is often the precursor to a real stroke ---- can result in loss of speech, memory impairment and permanent paralysis.",
        "secenekler": [
            "which",
            "where",
            "what",
            "whose",
            "how"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "The essential oil ---- from the lavender flower is used in aromatherapy ---- anxiety, insomnia, nervousness, and restlessness.",
        "secenekler": [
            "deriving / to have treated",
            "derived / to treat",
            "to have derived / treated",
            "to be derived / treat",
            "to be deriving / treating"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Major life changes are the greatest contributor of stress for most of us ---- they place the biggest demands on our resources for coping.",
        "secenekler": [
            "before",
            "because",
            "unless",
            "although",
            "as if"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "For a few years now, the World Health Organization ---- the public against the Zika virus, announcing that governments ---- everything possible to stop its spread.",
        "secenekler": [
            "has warned / used to do",
            "will warn / had done",
            "was warning / might do",
            "has been warning / must do",
            "had warned / had to do"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Celiac disease is a form of food sensitivity in which people ---- any form of gluten, and the symptoms, ---- abdominal pain, vomiting, and diarrhoea or poor growth in young children, are usually quite severe.",
        "secenekler": [
            "do not have to tolerate / include",
            "cannot tolerate / including",
            "may not tolerate / to include",
            "had better not tolerate / included",
            "should not tolerate / being included"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- soy is high in protein, it helps boost the protein content of many food stuffs.",
        "secenekler": [
            "Although",
            "Until",
            "Whenever",
            "Because",
            "Unless"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "---- some research initially indicated an association between many events at birth and autism, subsequent studies have not supported many of these findings.",
        "secenekler": [
            "Even though",
            "Whenever",
            "Because",
            "Only if",
            "By the time"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "---- medical problems including thyroid disease, Parkinson‚Äôs disease, head trauma, and brain infections can cause psychological symptoms, a thorough medical history must be taken.",
        "secenekler": [
            "Although",
            "Because",
            "As soon as",
            "By the time",
            "Unless"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "While dentistry ---- a quiet revolution with the emergence of holistic dentists, their complementary methods ---- under criticism.",
        "secenekler": [
            "has been undergoing / remain",
            "undergoes / would remain",
            "is undergoing / had remained",
            "had undergone / would have remained",
            "was undergoing / have remained"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "---- you consume only the juice of fruits and vegetables by squeezing them as in detox diets, you miss out on the fibre, protein, vitamins and minerals they provide, so it is better to eat them as a whole.",
        "secenekler": [
            "Whether",
            "If",
            "Although",
            "Until",
            "As though"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Researchers ---- the possibility that certain chemicals or other toxins in the environment ---- a role in causing or triggering Alzheimer's disease.",
        "secenekler": [
            "are studying / must have",
            "have been studying / may have",
            "will have studied / could have",
            "were studying / will have",
            "study / should have"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- excess sodium increases blood pressure, potassium decreases tension in blood vessel walls and helps keep blood pressure in check.",
        "secenekler": [
            "As if",
            "While",
            "Whether",
            "Therefore",
            "By the time"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "‚ÄãA study of genetic data from 300,000 people has found that those ---- scored the highest in intelligence tests were 30 percent more likely to have genes that suggest they need to wear glasses.",
        "secenekler": [
            "where",
            "who",
            "what",
            "whose",
            "whom"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Many childbirth experts believe that ---- a mother knows about the birth process ---- fear and apprehension she will feel giving birth.",
        "secenekler": [
            "whether / or",
            "the more / the more",
            "either / or",
            "not only / but also",
            "such / that"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Since all stroke symptoms appear suddenly and it is not possible to determine ---- it is a mini stroke ---- a full stroke, medical treatment should be sought immediately.",
        "secenekler": [
            "the more / the more",
            "whether / or",
            "neither / nor",
            "both / and",
            "as / as"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Although tissue ---- as a group of cells with a similar structure that perform a common function, it does not consist entirely of cells.",
        "secenekler": [
            "has defined",
            "is defined",
            "defines",
            "is defining",
            "will be defining"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "People‚Äôs concepts of Western medicine ---- over the past several years, and they ---- much more of their healthcare providers.",
        "secenekler": [
            "have shifted / are demanding",
            "have been shifted / had demanded",
            "had shifted / were going to demand",
            "shifted / demanded",
            "were shifted / will demand"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "A number of clinical trials for Alzheimer‚Äôs are being conducted, ---- unfortunately, no drug in development has yet shown a clear-cut benefit.",
        "secenekler": [
            "as soon as",
            "otherwise",
            "once",
            "unless",
            "but"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "The incidence of diabetes ---- quite dramatically in recent years, especially in the United States, where in general people take less exercise, and food ---- in greater quantity.",
        "secenekler": [
            "is increasing / will be taken",
            "has increased / is taken",
            "increases / is being taken",
            "increased / has been taken",
            "had increased / was taken"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "According to a 2013 study, when ---- on athletes after intense physical exercise, participants who ---- 3.1 gr of ginger per day experienced significantly reduced muscle soreness.",
        "secenekler": [
            "tested / received",
            "to have tested / would have received",
            "having been tested / were received",
            "having tested / have received",
            "to test / had received"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Zinc, ---- is largely found in oysters and red meat, can obviously be in short supply in a vegan or vegetarian diet.",
        "secenekler": [
            "whose",
            "how",
            "which",
            "when",
            "where"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Lactose intolerance does not affect an individual‚Äôs general health ---- the person gets necessary nutrients through alternative foods.",
        "secenekler": [
            "as long as",
            "in case",
            "unless",
            "as well as",
            "although"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Some patients with Alzheimer‚Äôs disease experience immense fear and frustration ---- they slowly lose their independence as they start to struggle with carrying out simple daily activities.",
        "secenekler": [
            "so that",
            "unless",
            "since",
            "though",
            "such as"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Smoking and aging are major risk factors for ---- diabetes ---- cardiovascular diseases.",
        "secenekler": [
            "both / and",
            "either / nor",
            "so / as",
            "but / also",
            "rather / than"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "The human body is the most well-researched area in science; ----, experts have only just discovered how its powers of self-healing work.",
        "secenekler": [
            "however",
            "in addition",
            "in brief",
            "in other words",
            "likewise"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "One of the best ways to battle Parkinson's symptoms is with physical activity, ---- self-guided such as yoga and walking ---- under a physiotherapist's supervision.",
        "secenekler": [
            "either / or",
            "neither / nor",
            "the more / the more",
            "as / as",
            "so / that"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "---- the lungs cannot expand or shrink of their own accord, breathing is made possible by the diaphragm and rib muscles.",
        "secenekler": [
            "As if",
            "Whether",
            "Before",
            "Since",
            "Just as"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Insomnia ---- chronic when someone ---- difficulty in either getting to sleep or staying asleep for at least three months.",
        "secenekler": [
            "became / is going to have",
            "becomes / has had",
            "was becoming / is having",
            "has become / was having",
            "had become / will have"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- the recent technological developments, orthopaedic surgeons can now repair limbs that would have been routinely amputated.",
        "secenekler": [
            "Thanks to",
            "As opposed to",
            "Prior to",
            "Regardless of",
            "Despite"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "---- the intricate structure and the overriding importance of the hand, any hand infection must be treated promptly and competently.",
        "secenekler": [
            "Along with",
            "Due to",
            "Regardless of",
            "In comparison with",
            "Instead of"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- medications may affect people in different ways, a patient may not be able to understand their true effectiveness before using them.",
        "secenekler": [
            "Unless",
            "Since",
            "Once",
            "As soon as",
            "After"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- patients suffering from dementia have greatly diminished cognitive reserve, they are at a high risk of experiencing acute cognitive or functional decline in the setting of new medical illnesses.",
        "secenekler": [
            "Unless",
            "Even if",
            "Because",
            "Although",
            "In order that"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Achondroplasia is a common form of dwarfism ---- a mutation that causes an individual to have short stature with short arms and legs, a large head, and distinctive facial features.",
        "secenekler": [
            "on behalf of",
            "instead of",
            "in favour of",
            "despite",
            "due to"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Tiny hairs in our inner ears, called cochlear hair cells, are vital to our natural perception of sound, and ---- we lose them, we do not grow them back.",
        "secenekler": [
            "by the time",
            "as if",
            "even if",
            "once",
            "unless"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "---- radiation therapy, which is targeted to a specific tissue, chemotherapy drugs are either taken by mouth or through a vein and circulate throughout the whole body.",
        "secenekler": [
            "Unlike",
            "Due to",
            "With the help of",
            "Because of",
            "As a result of"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Any infection can potentially become a huge problem ---- poor sanitation and malnutrition.",
        "secenekler": [
            "in spite of",
            "rather than",
            "due to",
            "instead of",
            "although"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Chewing gum bases provide no nutritive value, ---- added sugar may contribute to calorie intake (four to six calories per stick).",
        "secenekler": [
            "because",
            "just as",
            "although",
            "as long as",
            "if"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "---- lack of support, mental health conditions experienced by children and adolescents can lead to school failure, including poor academic performance and higher drop-out rates.",
        "secenekler": [
            "Due to",
            "In comparison with",
            "In spite of",
            "Unlike",
            "With the help of"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Secretory IgA is the major antibody released by mucosal surfaces such as the mouth and the intestinal tract, ---- it binds potentially dangerous microorganisms and prevents their sticking to tissue and initiating infections.",
        "secenekler": [
            "whom",
            "that",
            "where",
            "what",
            "which"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "---- a sedentary lifestyle can make you think the prospect of getting active is intimidating, so you should see a certified personal trainer for guidance on proper exercise techniques and help in designing a workout ---- to your needs.",
        "secenekler": [
            "To lead / to be tailored",
            "Having led / tailoring",
            "Led / being tailored",
            "Leading / tailored",
            "To be leading / having been tailored"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Genetic tests for certain types of cancer ---- a long way since they ---- clinics in 1995.",
        "secenekler": [
            "will come / have entered",
            "came / might enter",
            "have come / entered",
            "come / had entered",
            "will be coming / were entering"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "A mental health professional can diagnose a patient‚Äôs phobias ---- a detailed interview and discussion of both the mental and physical symptoms.",
        "secenekler": [
            "soon",
            "until",
            "for",
            "since",
            "after"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "In 2014, the US confirmed 125 cases of measles and declared that nearly half of the victims ---- against measles, so it seems the reason of the outbreak ---- America's growing anti-vaccination movement.",
        "secenekler": [
            "have not been vaccinated / is",
            "had not been vaccinated / was",
            "were not vaccinated / will be",
            "will not be vaccinated / has been",
            "are not vaccinated / had been"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- body cells come in many different shapes and sizes, they all share the same basic parts.",
        "secenekler": [
            "As long as",
            "Provided that",
            "Although",
            "Because",
            "Just as"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "In order to increase bone density, the doctor may prescribe a number of medications ---- lifestyle measures such as healthy diet and exercise.",
        "secenekler": [
            "unlike",
            "so that",
            "as well as",
            "for example",
            "because of"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Because individual genes are ---- small ---- be seen microscopically, standard chromosome analysis generally is not helpful.",
        "secenekler": [
            "so / that",
            "too / to",
            "as well / as",
            "such / as",
            "less / than"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- most people think of a narcoleptic as a person who falls asleep at inappropriate times, sufferers of narcolepsy also share other symptoms, including excessive daytime sleepiness and hallucinations.",
        "secenekler": [
            "Although",
            "Since",
            "Given that",
            "Unless",
            "Once"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Drinking unpasteurised milk puts you at 100 times greater risk of contracting bacteria like E. coli or listeria, ---- can make you sick with diarrhoea, vomiting, and even kidney failure.",
        "secenekler": [
            "what",
            "who",
            "when",
            "which",
            "why"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "The National Centre for Health ---- periodic Nutrition Examination Surveys since 1960 to determine how much obesity ---- among Americans.",
        "secenekler": [
            "had been conducting / is increasing",
            "is conducting / was increasing",
            "has been conducting / has increased",
            "was conducting / will have increased",
            "will conduct / increased"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Most tumor markers are ---- sensitive ---- specific enough to screen for or diagnose cancer without the support of other clinical findings.",
        "secenekler": [
            "neither / nor",
            "as / as",
            "rather / than",
            "but / also",
            "such / that"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Today, many neonatal care units ---- massage therapy with premature infants, as the gentle touch of the massage therapist ---- to calm and relax these babies.",
        "secenekler": [
            "will use / had seemed",
            "used / will have seemed",
            "were using / will seem",
            "had used / has seemed",
            "use / seems"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "---- being concerned about the environment, nearly three-quarters of Generation Z are unwilling to eat eco-friendly lab-grown meat.",
        "secenekler": [
            "Similar to",
            "In spite of",
            "Due to",
            "Instead of",
            "Prior to"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- much of the bacterial population has beneficial effects in the proper processing of food, the opposite can easily occur when proper digestion has been impaired.",
        "secenekler": [
            "While",
            "Since",
            "When",
            "Only if",
            "So long as"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Researchers who analysed the effects of 13 oils and fats on cholesterol levels found that seed oils were best at lowering 'bad' LDL cholesterol ---- their unsaturated fat content.",
        "secenekler": [
            "in place of",
            "due to",
            "according to",
            "such as",
            "on behalf of"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Aesthetic surgery is a modern phenomenon that demands ---- a set of specific technical innovations in surgery ---- a cultural presupposition that you have the right to alter your body.",
        "secenekler": [
            "as / as",
            "the more / the less",
            "not only / but also",
            "such / that",
            "no sooner / than"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "---- they are not always indicators of cancer, unusual bleeding, unexplained changes in weight, indigestion and difficulty swallowing can be signs of cancerous tumors.",
        "secenekler": [
            "When",
            "As far as",
            "Whether",
            "Since",
            "Although"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "If you feel weak and tired, you should increase your water intake because it will ---- help pick up energy levels ---- decrease your risk of urinary tract infections.",
        "secenekler": [
            "such / that",
            "neither / nor",
            "whether / or",
            "no sooner / than",
            "not only / but also"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Human longevity climbed in the 20th century ---- changes in public health policies and advances in medical practice.",
        "secenekler": [
            "contrary to",
            "rather than",
            "despite",
            "except for",
            "as a result of"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "The idea that people with dark skin do not burn is a misconception, as UV rays have the same damaging effects on them as others, so ---- how fair or dark you are, you should use sunscreen when outdoors.",
        "secenekler": [
            "in the hope of",
            "regardless of",
            "thanks to",
            "as a consequence of",
            "by means of"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "UV rays are quite damaging to our health, so experts recommend outdoor activities earlier in the morning or during the afternoon ---- the exposure is lower.",
        "secenekler": [
            "what",
            "when",
            "where",
            "which",
            "why"
        ],
        "dogruCevap": "B"
    },
{
        "metin": "Golden rice, which has been genetically modified ---- blindness in undernourished children, has been judged safe ---- by the US Food and Drug Administration.",
        "secenekler": [
            "to prevent / to eat",
            "preventing / to have been eaten",
            "being prevented / eaten",
            "to be prevented / eating",
            "having prevented / being eaten"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Being very significant ---- economical and geopolitical aspects, control of the Bosphorus was always demanded by many countries.",
        "secenekler": [
            "in spite of",
            "rather than",
            "instead of",
            "regardless of",
            "in terms of"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "The position of a dog‚Äôs tail can tell a lot about how a dog is feeling; when low it suggests submission ---- when high it is a sign of dominance.‚Äã",
        "secenekler": [
            "whereas",
            "otherwise",
            "only if",
            "until",
            "unless"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "At the end of the First World War, the leaders of victorious countries gathered at Versailles, and there, they ---- to decide what penalties Germany, Austria and other allies ----.",
        "secenekler": [
            "tried / would have to pay",
            "had tried / must have paid",
            "were trying / were paying",
            "used to try / might have paid",
            "could try / should have paid"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Known as the ‚ÄòLady with the Lamp‚Äô during the Crimean War, Florence Nightingale, the most famous nurse in history, focused her efforts ---- on the prevention of diseases ---- the promotion of healthy living in a more positive way.",
        "secenekler": [
            "the more / the more",
            "not only / but also",
            "whether / or",
            "such / that",
            "as / as"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- sustainable technologies usually cost a lot of money to set up, they save money in the long run.",
        "secenekler": [
            "Even if",
            "After",
            "Just as",
            "Unless",
            "Once"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "---- some people produce irresistibly scented sweat that insects can detect from 30 m away, they are especially attractive to mosquitoes.",
        "secenekler": [
            "Until",
            "As",
            "Whereas",
            "Whether",
            "Before"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Many advanced nations ---- space exploration, and plans are under way ---- a human presence on Mars.",
        "secenekler": [
            "begin / seeing",
            "have begun / to see",
            "are beginning / to have seen",
            "began / being seen",
            "had begun / having seen"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Had Shakespeare been interested in fame beyond death, he would have done something to make sure his plays survived him, ---- he did nothing to help his own writing to live on.",
        "secenekler": [
            "even if",
            "yet",
            "just as",
            "once",
            "unless"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "For centuries, people have thought that we have two brains ---- we have two lungs or two kidneys.",
        "secenekler": [
            "until",
            "even though",
            "whether",
            "so long as",
            "just as"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Animals trapped in a stone called ‚Äòamber‚Äô are sometimes so well preserved that they look ---- they have just died.",
        "secenekler": [
            "so that",
            "in case",
            "as though",
            "even if",
            "now that"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Books continue to be a major medium for communicating scholarly works in the field of history, ---- many other social sciences, where journal articles are far more important.",
        "secenekler": [
            "with the help of",
            "in contrast to",
            "due to",
            "such as",
            "on the basis of"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Japan is enormously centralized, and Tokyo, the capital city, hosts ---- the national government ---- the stock market and the world‚Äôs largest companies.",
        "secenekler": [
            "not only / but also",
            "whether / or",
            "neither / nor",
            "such / that",
            "the more / the less"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "In the age of steam, with new railroads ---- across Europe and the US, engineers began ---- even more applications for the steam engine.",
        "secenekler": [
            "to spread / finding",
            "having spread / to have found",
            "spreading / to find",
            "to have spread / find",
            "spread / having found"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "For the first time, doctors ---- that temporarily opening the protective barrier of the human brain ---- to boost the delivery of cancer medication to brain tumours.",
        "secenekler": [
            "are showing / helped",
            "have shown / helps",
            "showed / is helping",
            "will have shown / was helping",
            "will be showing / has been helping"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "The Sun burst into being 4.6 billion years ago, which makes studying its early days difficult as physical material ---- from this period is scarce, but scientists have found crystals more than 4.5 billion years old ---- deep within meteorites that indicate the Sun had a tumultuous early life.",
        "secenekler": [
            "remained / to have been buried",
            "remaining / buried",
            "to be remaining / being buried",
            "to remain / having been buried",
            "having remained / to be buried"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "Tomatoes are so widely consumed that they represent a vehicle ---- beneficial nutrients to those who ---- expensive seasonal berries.",
        "secenekler": [
            "having introduced / would not afford",
            "introducing / could not afford",
            "to have introduced / may not afford",
            "to introduce / cannot afford",
            "being introduced / might not afford"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "The world‚Äôs first cities appear ---- in regions where climate and soil allowed the land to provide an abundance of plant and animal life that would be necessary ---- larger populations.",
        "secenekler": [
            "to have arisen / to support",
            "arising / supporting",
            "to arise / to have supported",
            "being arisen / to be supported",
            "having arisen / being supported"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Genetic evidence indicates that higher levels of caffeine in a person‚Äôs blood ---- to lower weight, but people ---- that drinking more coffee will be a route to weight loss.",
        "secenekler": [
            "used to be linked / cannot assume",
            "would be linked / might not assume",
            "may be linked / should not assume",
            "could be linked / will not assume",
            "ought to be linked / must not assume"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "---- there is no consensus among folklorists on how to define folklore nor how to explain the issues of the meaning and the function of it, folklore generally refers to cultural expressions, such as narratives, music, dance, beliefs and festivals.",
        "secenekler": [
            "Once",
            "While",
            "Until",
            "As",
            "In case"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- all dogs show signs of having ‚Äòtheory of mind‚Äô, which enables them to grasp that we think differently from them, it is unlikely that they are capable of extending this to knowing the reason why one person behaves differently to another.",
        "secenekler": [
            "In case",
            "Only if",
            "As far as",
            "Given that",
            "Even though"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Industrial nations consume nearly 75 to 80 percent of the fossil fuels burned each year; ----, they are responsible for the majority of greenhouse gas emissions.",
        "secenekler": [
            "instead",
            "on the contrary",
            "as a result",
            "for example",
            "however"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "---- male and female roles have become less sharply differentiated in some societies than they were in the past, they are still a very important source of inequality and difference.",
        "secenekler": [
            "Unless",
            "Whenever",
            "Because",
            "Until",
            "Although"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "Animals are hunted by humans ---- for their meat ---- for parts of their bodies that are used to create medicines, clothes, and jewellery.",
        "secenekler": [
            "neither / nor",
            "such / that",
            "not only / but also",
            "the more / the more",
            "as / as"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "A study found that a diet rich in vegetables, fruit, fish, cereals and monounsatured fats, such as olive oil, ---- the loss of brain cells and ---- you mentally sharper for longer.",
        "secenekler": [
            "reduced / should have kept",
            "reduces / could keep",
            "will reduce / must have kept",
            "has reduced / need to keep",
            "had reduced / might keep"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "In linguistics, the distinction between a word's sense and reference is a critical one, ---- it allows us to study the many cases where we happily use words, even though they do not naturally correspond to the way things are in the world.",
        "secenekler": [
            "in order that",
            "so that",
            "because",
            "if",
            "once"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Music is a very small word to encompass something that takes ---- many forms ---- there are cultural and subcultural identities.",
        "secenekler": [
            "either / or",
            "both / and",
            "as / as",
            "such / that",
            "not only / but also"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "---- children can be easy targets for exploitation and victimization, supervision is a necessary component of any Internet safety.",
        "secenekler": [
            "Even if",
            "Although",
            "Since",
            "Before",
            "Unless"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Solar cells ---- into clothing sound like a great way to charge our gadgets while we are on the move, but for the idea to work, the cells ---- both flexible and cheap.",
        "secenekler": [
            "placing / should be",
            "placed / must be",
            "to place / could be",
            "being placed / used to be",
            "to be placed / had to be"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "70 percent of the Earth's surface is liquid, ---- water scarcity affects more than a billion people each year.",
        "secenekler": [
            "as if",
            "yet",
            "given that",
            "instead",
            "thus"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "For many years, social researchers regarded gossip as unworthy of scientific investigation; ----, sociologists have recently begun to recognise gossip as an important feature of social life.",
        "secenekler": [
            "accordingly",
            "in other words",
            "however",
            "as a result",
            "for example"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "In 80 AD, ‚ÄãEmperor Titus arranged 100 days of gladiator fights and wild animal hunts ---- the opening of the magnificent Colosseum in Rome, which took 8 years ----.",
        "secenekler": [
            "being marked / having built",
            "to be marked / to have built",
            "having marked / building",
            "marking / being built",
            "to mark / to build"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "---- autism can be a gift to higher functioning individuals, improving their ability in subjects such as mathematics and software, it is hardly true to say that everyone with the condition is a genius.",
        "secenekler": [
            "Because",
            "Although",
            "Once",
            "If",
            "Until"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "The capitalist world-system began as a purely European phenomenon; ----, it became global through colonisation and the penetration of Western influence.",
        "secenekler": [
            "that is",
            "as a result",
            "for example",
            "however",
            "instead"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "---- pre-schoolers are limited in their cognitive development to focusing on their own perspective and cannot understand the spectrum of reasons that may have led to the divorce of their parents, they may feel that the divorce is their fault.",
        "secenekler": [
            "Now that",
            "Because",
            "Only when",
            "Unless",
            "Even if"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- a metropolis can build new power plants to meet a rising need for electricity, our muscles respond to the demands of exercise by producing tiny new structures inside cells that supply the body with energy.",
        "secenekler": [
            "Now that",
            "Even though",
            "Only if",
            "Just as",
            "In case"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "Scientists have grown more aware of the social implications of their work ---- people have become more conscious of the ways in which science and technology affect their lives.",
        "secenekler": [
            "but",
            "in case",
            "just as",
            "only if",
            "unless"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "While the death of Queen Victoria in 1901 at the age of 81 hardly came as a shock, her funeral ---- a huge, international event because she ---- on the throne since 1837.",
        "secenekler": [
            "became / had been",
            "would have become / was",
            "was becoming / would be",
            "had become / used to be",
            "would become / could be"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Scientists do research in natural forces ---- for the sake of new discoveries ---- to use the findings for the advantage of mankind.",
        "secenekler": [
            "not only / but also",
            "so / that",
            "the more / the more",
            "such / that",
            "whether / or"
        ],
        "dogruCevap": "A"
    },
    {
        "metin": "Wheat, which has been a staple food for centuries, can turn out to be bad for some people ---- because they are allergic to it ---- because they have an autoimmune disorder.",
        "secenekler": [
            "so / that",
            "neither / nor",
            "as / as",
            "the more / the more",
            "either / or"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "In countries where nutritional status tends to be poor and deficiency is more common, vitamin A ---- to reduce the mortality rate of children ---- from a number of different viral infections.",
        "secenekler": [
            "had been found / to suffer",
            "is being found / to have suffered",
            "was found / have suffered",
            "has been found / suffering",
            "will be found / suffered"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "---- the 50-second silent film Train Pulling Into A Station was first shown in 1895, people were so terrified by the locomotive racing towards them that they hurried to the back of the theatre.",
        "secenekler": [
            "Before",
            "Although",
            "Since",
            "When",
            "As if"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "---- connecting distant empires into an integrated web of commerce, the Silk Road carried infectious diseases that severely affected immunity-free victims.",
        "secenekler": [
            "In case of",
            "Apart from",
            "In terms of",
            "On behalf of",
            "For the purpose of"
        ],
        "dogruCevap": "B"
    },
    {
        "metin": "---- goats live in almost inaccessible regions, their populations have been seriously affected by hunting and human encroachment to the foothills, where many species feed during the summer months.‚Äã",
        "secenekler": [
            "As if",
            "Since",
            "As long as",
            "Although",
            "Once"
        ],
        "dogruCevap": "D"
    },
    {
        "metin": "By 2.5 million years ago, when they began ---- stone tools, early humans had understood that they ---- the natural world to their own advantage.",
        "secenekler": [
            "to have made / had to alter",
            "to make / used to alter",
            "making / could alter",
            "having made / should have altered",
            "to have been making / must have altered"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "Surprisingly, the symbol for zero emerged later than the concepts for other numbers, and ---- the Babylonians used a symbol for zero, it was merely a placeholder and not used for computational purposes.",
        "secenekler": [
            "just as",
            "as if",
            "in case",
            "because",
            "even though"
        ],
        "dogruCevap": "E"
    },
    {
        "metin": "With the development of agriculture, humans ---- to transform more and more extensively the environments in which they ----.",
        "secenekler": [
            "had begun / had been living",
            "are beginning / were living",
            "began / lived",
            "have begun / were going to live",
            "would begin / have been living"
        ],
        "dogruCevap": "C"
    },
    {
        "metin": "There are some people who ---- objects from 6 metres away with the same sharpness that a normal-sighted person ---- in to 4.5 metres to achieve.",
        "secenekler": [
            "may view / had to move",
            "must view / could move",
            "can view / would have to move",
            "ought to view / should have moved",
            "might view / can move"
        ],
        "dogruCevap": "C"
    },
 ];
        
        const ui = { 
            sinavArayuzu: document.getElementById('sinav-arayuzu'), 
            sonucArayuzu: document.getElementById('sonuc-arayuzu'), 
            soruIcerik: document.getElementById('soru-icerik'), 
            optikFormIcerik: document.getElementById('optik-form-icerik'), 
            sinavPdfIndirBtn: document.getElementById('sinav-pdf-indir-btn'),
            onayPopup: document.getElementById('onay-popup'),
            bilgiPopup: document.getElementById('bilgi-popup'),
            sayacPopup: document.getElementById('sayac-popup'),
            soruDetayPopup: document.getElementById('soru-detay-popup')
        };

        const SINAVDAKI_SORU_SAYISI = SORU_HAVUZU.length; 
        const SORU_BASINA_DAKIKA = 1.5;
        const SINAV_SURESI_DAKIKA = Math.ceil(SINAVDAKI_SORU_SAYISI * SORU_BASINA_DAKIKA);
        let state = {};
        let unsubscribeOnSnapshot = null;

        function resetState() { 
            state = { 
                currentUser: state.currentUser,
                mevcutSoruIndex: 0, 
                sorular: [], 
                ogrenciCevaplari: {}, 
                ustuCiziliSecenekler: {}, 
                sinavAktif: false, 
                isReviewMode: false, 
                mainTimerInterval: null, 
                sonSonuc: null 
            }; 
        }
        
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const userData = await kullaniciVerisiCek(user.uid);
                state.currentUser = { ...user, ...userData };
                
                kullaniciBilgileriniYukle();
                olayDinleyicileriEkle();
                canliOturumDinleyicisiEkle();

                const reviewDataString = sessionStorage.getItem('reviewData');
                if (reviewDataString) {
                    const reviewData = JSON.parse(reviewDataString);
                    sinaviIncelemeModundaBaslat(reviewData);
                    sessionStorage.removeItem('reviewData');
                } else {
                    if (sessionStorage.getItem('sinavAktif')) {
                        sessionStorage.removeItem('sinavAktif');
                        document.body.innerHTML = `<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center">
                            <h1 class="text-2xl font-bold text-red-600">Sƒ±nav esnasƒ±nda sayfa yenilemek kural dƒ±≈üƒ±dƒ±r. Oturumunuz sonlandƒ±rƒ±ldƒ±.</h1>
                            <a href='./index.html' class="mt-4 bg-sky-500 text-white font-bold py-2 px-4 rounded-lg">Ana Sayfaya D√∂n</a>
                        </div>`;
                        return;
                    }
                    sinaviBaslat();
                }
            } else {
                window.location.href = './index.html';
            }
        });

        async function kullaniciVerisiCek(uid) {
            const userDocRef = doc(db, "kullanicilar", uid);
            try {
                const docSnap = await getDoc(userDocRef);
                if (docSnap.exists()) {
                    return docSnap.data();
                } else {
                    console.warn("Kullanƒ±cƒ± veri dok√ºmanƒ± bulunamadƒ±.");
                    return { isim: null, soyisim: null };
                }
            } catch (error) {
                console.error("Kullanƒ±cƒ± verisi √ßekilirken hata:", error);
                return { isim: null, soyisim: null };
            }
        }

        function kullaniciBilgileriniYukle() {
            if(state.currentUser) {
                const { isim, soyisim, email } = state.currentUser;
                const gorunecekIsim = (isim && soyisim) ? `${isim} ${soyisim}` : (email);
                document.querySelector('.kullanici-ad-soyad').textContent = gorunecekIsim;
            }
        }

        function olayDinleyicileriEkle() {
            document.getElementById('sinav-sonlandir-btn').addEventListener('click', () => { showOnayPopup('Sƒ±navƒ± sonlandƒ±rmak istediƒüinize emin misiniz? Cevaplarƒ±nƒ±z kaydedilecek.', () => sinaviSonlandir(true), 'Evet, Sonlandƒ±r'); });
            document.getElementById('prev-btn').addEventListener('click', oncekiSoru);
            document.getElementById('next-btn').addEventListener('click', sonrakiSoru);
            document.getElementById('sorulari-incele-btn').addEventListener('click', () => { if (state.sonSonuc) { sessionStorage.setItem('reviewData', JSON.stringify(state.sonSonuc)); window.location.reload(); } });
            document.getElementById('gecmis-sayfasina-git-btn').addEventListener('click', () => { window.location.href = './gecmis-sinavlar.html'; });
            document.getElementById('yeni-sinav-btn').addEventListener('click', () => { window.location.href = './index.html'; });
            
            ui.soruIcerik.addEventListener('click', (event) => {
                if (state.isReviewMode) return;
                const listItem = event.target.closest('li[data-option]');
                if (listItem) {
                    const soruId = state.sorular[state.mevcutSoruIndex].id;
                    const secenek = listItem.dataset.option;
                    selectAnswer(soruId, secenek);
                }
            });

            document.getElementById('optik-form-icerik').addEventListener('change', (event) => {
                 if (event.target.type === 'radio' && !state.isReviewMode) {
                    const soruId = parseInt(event.target.dataset.soruId);
                    const secenek = event.target.value;
                    selectAnswer(soruId, secenek);
                 }
            });

            ui.soruIcerik.addEventListener('contextmenu', handleStrikethrough);
            document.getElementById('optik-form-sonuc').addEventListener('click', (event) => { const satir = event.target.closest('[data-soru-id]'); if (satir && satir.dataset.soruId) { showSoruDetayPopup(parseInt(satir.dataset.soruId)); } });
            document.getElementById('sonuclara-don-btn').addEventListener('click', () => { if (state.sonSonuc) { showSonucSayfasi(state.sonSonuc); } });
            
            ui.soruIcerik.addEventListener('mouseup', (event) => {
                if (!event.target.closest('.question-text')) return;
                const selection = window.getSelection();
                if (selection.isCollapsed || selection.rangeCount === 0) return;
                const range = selection.getRangeAt(0);
                if (range.commonAncestorContainer.parentNode.closest('.question-text')) {
                    const mark = document.createElement('mark');
                    try { range.surroundContents(mark); } 
                    catch (e) { console.warn("Se√ßim tam olarak sarƒ±lamadƒ±.", e); }
                }
                selection.removeAllRanges();
            });

            ui.soruIcerik.addEventListener('click', (event) => {
                if (event.target.tagName === 'MARK' && event.target.closest('.question-text')) {
                    const markElement = event.target;
                    const parent = markElement.parentNode;
                    markElement.replaceWith(document.createTextNode(markElement.textContent));
                    parent.normalize();
                }
            });

            ui.sinavPdfIndirBtn.addEventListener('click', () => sorulariPDFIndir(false));
            document.getElementById('sonuc-pdf-indir-btn').addEventListener('click', () => sorulariPDFIndir(true));
            
            document.getElementById('onay-iptal-btn').addEventListener('click', () => hideModal(ui.onayPopup));
            document.getElementById('bilgi-kapat-btn').addEventListener('click', () => hideModal(ui.bilgiPopup));
            document.getElementById('soru-detay-kapat-btn').addEventListener('click', () => hideModal(ui.soruDetayPopup));

        }
        
        async function canliOturumDinleyicisiEkle() {
            window.addEventListener('beforeunload', async () => {
                if (state.sinavAktif && state.currentUser) {
                    const sessionRef = doc(db, 'aktifOturumlar', state.currentUser.uid);
                    await deleteDoc(sessionRef);
                }
            });
        }
        
        async function sinaviSonlandir(kullaniciIstegi) {
            state.sinavAktif = false;
            if (unsubscribeOnSnapshot) unsubscribeOnSnapshot();

            if (state.currentUser) {
                const sessionRef = doc(db, 'aktifOturumlar', state.currentUser.uid);
                await deleteDoc(sessionRef).catch(err => console.error("Canlƒ± oturum silinemedi:", err));
            }

            sessionStorage.removeItem('sinavAktif');
            clearInterval(state.mainTimerInterval);
            document.querySelectorAll('#sinav-arayuzu button, #sinav-arayuzu input').forEach(el => el.disabled = true);
            
            const sonuc = sonuclariHesapla();
            state.sonSonuc = sonuc.local;
            
            await sonucuSunucuyaGonder(sonuc.firebase);
            sonucuLocaleKaydet(sonuc.local);
            
            let mesaj = kullaniciIstegi ? "Sƒ±navƒ±nƒ±z sonlandƒ±rƒ±lmƒ±≈ütƒ±r.<br>Sonu√ßlarƒ±nƒ±z ba≈üarƒ±yla kaydedildi." : "S√ºreniz dolduƒüu i√ßin sƒ±navƒ±nƒ±z sonlandƒ±rƒ±lmƒ±≈ütƒ±r.<br>Sonu√ßlarƒ±nƒ±z ba≈üarƒ±yla kaydedildi.";
            showBilgiPopup(mesaj, () => startResultsCountdown(sonuc.local));
        }
        
        async function sinaviBaslat() {
            if (state.sinavAktif) return;
            resetState();
            
            if (!sorulariYukle()) return;

            ui.sonucArayuzu.classList.add('hidden');
            ui.sinavArayuzu.classList.remove('hidden');
            state.sinavAktif = true;

            if (state.currentUser) {
                const { isim, soyisim } = state.currentUser;
                const sessionRef = doc(db, "aktifOturumlar", state.currentUser.uid);
                
                await setDoc(sessionRef, {
                    isim: isim || 'Bilinmiyor',
                    soyisim: soyisim || '',
                    sinavTuru: "√áƒ±kmƒ±≈ü Sorular",
                    baslamaZamani: serverTimestamp()
                }).catch(err => console.error("Canlƒ± oturum ba≈ülatƒ±lamadƒ±:", err));

                unsubscribeOnSnapshot = onSnapshot(sessionRef, (doc) => {
                    if (!doc.exists() && state.sinavAktif) sinaviAdminSonlandirdi();
                });
            }

            sessionStorage.setItem('sinavAktif', 'true');
            optikFormuCiz();
            soruyuEkranaCiz(state.mevcutSoruIndex);
            startMainExamTimer();
        }

        async function sonucuSunucuyaGonder(sonuc) {
            if (!state.currentUser) return console.error("Kullanƒ±cƒ± giri≈üi yapƒ±lmadƒ±ƒüƒ± i√ßin sonu√ß kaydedilemedi.");
            try {
                const userExamsCollectionRef = collection(db, "kullanicilar", state.currentUser.uid, "sinavlar");
                await addDoc(userExamsCollectionRef, sonuc);
                console.log("Sonu√ß ba≈üarƒ±yla Firebase'e kaydedildi.");
            } catch (e) {
                console.error("Firebase'e yazƒ±lƒ±rken hata olu≈ütu: ", e);
            }
        }
        
        function sonucuLocaleKaydet(sonuc) {
            if (!state.currentUser) return;
            let sinavGecmisi = JSON.parse(localStorage.getItem(`sinavGecmisi_${state.currentUser.uid}`)) || [];
            sinavGecmisi.push(sonuc);
            localStorage.setItem(`sinavGecmisi_${state.currentUser.uid}`, JSON.stringify(sinavGecmisi));
        }

        function sinaviAdminSonlandirdi() {
            if (!state.sinavAktif) return;
            if (unsubscribeOnSnapshot) unsubscribeOnSnapshot();
            clearInterval(state.mainTimerInterval);
            state.sinavAktif = false;
            document.querySelectorAll('#sinav-arayuzu button, #sinav-arayuzu input').forEach(el => el.disabled = true);
            showBilgiPopup('Oturumunuz y√∂netici tarafƒ±ndan sonlandƒ±rƒ±lmƒ±≈ütƒ±r. Ana sayfaya y√∂nlendiriliyorsunuz.', () => {
                window.location.href = './index.html';
            });
        }

        function soruyuEkranaCiz(index) {
            const soru = state.sorular[index];
            const ustucizililer = state.ustuCiziliSecenekler[soru.id] || [];
            
            let seceneklerHtml = soru.secenekler.map((secenek, i) => {
                const secenekHarfi = String.fromCharCode(65 + i);
                const isChecked = state.ogrenciCevaplari[soru.id] === secenekHarfi;
                const isStriked = ustucizililer.includes(secenekHarfi);
                
                const liClasses = `flex items-start gap-4 p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 transform hover:scale-[1.02] ${isChecked ? 'bg-sky-50 border-sky-500 scale-[1.02] shadow-md' : 'bg-white border-slate-200 hover:border-sky-300'}`;
                const labelClasses = `flex items-center justify-center w-8 h-8 rounded-full border-2 flex-shrink-0 mt-1 transition ${isChecked ? 'bg-sky-500 border-sky-500 text-white' : 'bg-white border-slate-300'}`;
                const spanClasses = `flex-grow pt-1 ${isStriked ? 'line-through text-slate-400' : 'text-slate-700'}`;

                return `<li class="${liClasses}" data-option="${secenekHarfi}">
                            <label for="secenek-${soru.id}-${secenekHarfi}" class="${labelClasses} no-select">${secenekHarfi}</label>
                            <span class="${spanClasses}">${secenek}</span>
                        </li>`;
            }).join('');

            ui.soruIcerik.innerHTML = `
                <div class="mb-4">
                    <p class="text-xl font-bold text-slate-800">Soru ${soru.id} / ${state.sorular.length}</p>
                </div>
                <div class="bg-sky-50 text-sky-800 p-4 rounded-lg mb-6 border-l-4 border-sky-400">
                    ${soru.talimat || "For these questions, choose the best word or expression to fill the space."}
                </div>
                <div class="question-text text-xl text-slate-800 leading-relaxed mb-8">${soru.metin}</div>
                <ul class="space-y-3">${seceneklerHtml}</ul>`;

            document.getElementById('prev-btn').disabled = index === 0;
            document.getElementById('next-btn').disabled = index === state.sorular.length - 1;
        }

        function optikFormuCiz() {
            ui.optikFormIcerik.innerHTML = state.sorular.map(soru => {
                const seceneklerHtml = ['A', 'B', 'C', 'D', 'E'].map(secenek => {
                    const isChecked = state.ogrenciCevaplari[soru.id] === secenek;
                    return `<div>
                                <input type="radio" id="optik-${soru.id}-${secenek}" name="optik-soru-${soru.id}" value="${secenek}" ${isChecked ? "checked" : ""} class="hidden peer">
                                <label for="optik-${soru.id}-${secenek}" class="w-8 h-8 flex items-center justify-center rounded-full border border-slate-300 cursor-pointer transition peer-checked:bg-slate-800 peer-checked:text-white peer-checked:border-slate-800 hover:border-slate-500">${secenek}</label>
                            </div>`;
                }).join('');

                return `<div class="grid grid-cols-[auto,1fr] items-center gap-3 p-2 rounded-md hover:bg-slate-50" id="optik-soru-${soru.id}">
                            <span class="font-bold text-slate-600">${soru.id}</span>
                            <div class="flex justify-around">${seceneklerHtml}</div>
                        </div>`;
            }).join('');
        }
        
        function selectAnswer(soruId, secenek) {
            if (state.isReviewMode) return;
            
            // Cevabƒ± state'e kaydet
            state.ogrenciCevaplari[soruId] = secenek;

            // Sadece mevcut soru ekrandaysa soru panelini g√ºncelle
            if (state.sorular[state.mevcutSoruIndex].id === soruId) {
                soruyuEkranaCiz(state.mevcutSoruIndex);
            }

            // Optik formu her zaman g√ºncelle
            const optikRadios = document.querySelectorAll(`input[name="optik-soru-${soruId}"]`);
            optikRadios.forEach(radio => radio.checked = (radio.value === secenek));
        }

        function sorulariYukle() {
            if (SORU_HAVUZU.length === 0) {
                alert("Sƒ±nav ba≈ülatƒ±lamƒ±yor: Soru havuzu bo≈ü!");
                document.body.innerHTML = `<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center">
                    <h1 class="text-2xl font-bold text-red-600">Soru havuzunda hi√ß soru bulunamadƒ±.</h1>
                    <a href='./index.html' class="mt-4 bg-sky-500 text-white font-bold py-2 px-4 rounded-lg">Ana Sayfaya D√∂n</a>
                </div>`;
                return false;
            }
            const secilecekSoruSayisi = Math.min(SINAVDAKI_SORU_SAYISI, SORU_HAVUZU.length);
            const secilenSorular = [...SORU_HAVUZU].sort(() => 0.5 - Math.random()).slice(0, secilecekSoruSayisi);
            
            state.sorular = secilenSorular.map((soru, index) => ({ 
                id: index + 1, 
                talimat: soru.talimat || "For these questions, choose the best word or expression to fill the space.", 
                ...soru 
            }));
            return true;
        }

        function sonuclariHesapla() {
            let dogru = 0, yanlis = 0, bos = 0;
            const { isim, soyisim, email } = state.currentUser;
            const kullaniciAdi = (isim && soyisim) ? `${isim} ${soyisim}` : email;
            
            state.sorular.forEach(soru => {
                const ogrenciCevabi = state.ogrenciCevaplari[soru.id];
                if (!ogrenciCevabi) bos++;
                else if (ogrenciCevabi === soru.dogruCevap) dogru++;
                else yanlis++;
            });

            const net = (dogru - (yanlis / 4)).toFixed(2);
            
            const sonucData = {
                isim: kullaniciAdi, 
                sinavTuru: "√áƒ±kmƒ±≈ü Sorular", 
                dogruSayisi: dogru, 
                yanlisSayisi: yanlis, 
                bosSayisi: bos,
                netSayisi: net, 
                toplamSoru: state.sorular.length, 
                sorular: state.sorular, 
                ogrenciCevaplari: state.ogrenciCevaplari
            };
            
            return {
                firebase: { ...sonucData, tarih: serverTimestamp() },
                local: { ...sonucData, tarih: new Date().toLocaleString('tr-TR') }
            };
        }
        
        function handleStrikethrough(event) { 
            if (state.isReviewMode) return; 
            const listItem = event.target.closest('li'); 
            if (listItem) { 
                event.preventDefault(); 
                const soruId = state.sorular[state.mevcutSoruIndex].id; 
                const secenek = listItem.dataset.option; 
                if (!state.ustuCiziliSecenekler[soruId]) state.ustuCiziliSecenekler[soruId] = []; 
                const index = state.ustuCiziliSecenekler[soruId].indexOf(secenek); 
                if (index > -1) state.ustuCiziliSecenekler[soruId].splice(index, 1); 
                else state.ustuCiziliSecenekler[soruId].push(secenek); 
                listItem.querySelector('span').classList.toggle('line-through'); 
                listItem.querySelector('span').classList.toggle('text-slate-400'); 
            } 
        }

        function oncekiSoru() { if (state.mevcutSoruIndex > 0) { state.mevcutSoruIndex--; soruyuEkranaCiz(state.mevcutSoruIndex); } }
        function sonrakiSoru() { if (state.mevcutSoruIndex < state.sorular.length - 1) { state.mevcutSoruIndex++; soruyuEkranaCiz(state.mevcutSoruIndex); } }
        function startMainExamTimer() { const timerEl = document.getElementById('main-exam-timer'); let saniye = SINAV_SURESI_DAKIKA * 60; state.mainTimerInterval = setInterval(() => { if (saniye < 0) { clearInterval(state.mainTimerInterval); sinaviSonlandir(false); return; } const saat = Math.floor(saniye / 3600); const dakika = Math.floor((saniye % 3600) / 60); const kalanSaniye = saniye % 60; timerEl.textContent = [saat, dakika, kalanSaniye].map(v => v < 10 ? '0' + v : v).join(':'); saniye--; }, 1000); }
        
        function showModal(modalElement) {
            modalElement.classList.remove('hidden');
            setTimeout(() => {
                modalElement.querySelector('.transform').classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function hideModal(modalElement) {
             modalElement.querySelector('.transform').classList.add('scale-95', 'opacity-0');
             setTimeout(() => {
                modalElement.classList.add('hidden');
            }, 200);
        }

        function showBilgiPopup(mesaj, callback) { 
            const popup = ui.bilgiPopup; 
            popup.querySelector('#bilgi-mesaji').innerHTML = mesaj; 
            showModal(popup);
            const kapatBtn = popup.querySelector('#bilgi-kapat-btn'); 
            const handler = () => { 
                hideModal(popup); 
                if(callback) callback(); 
            }; 
            kapatBtn.addEventListener('click', handler, {once: true}); 
        }

        function showOnayPopup(mesaj, callback, confirmText = 'Evet') { 
            const popup = ui.onayPopup; 
            popup.querySelector('#onay-mesaji').innerHTML = mesaj; 
            const devamBtn = popup.querySelector('#onay-devam-btn'); 
            devamBtn.textContent = confirmText; 
            showModal(popup);
            const iptalBtn = popup.querySelector('#onay-iptal-btn'); 
            const devamListener = () => { hideModal(popup); callback(); }; 
            const iptalListener = () => { hideModal(popup); }; 
            devamBtn.addEventListener('click', devamListener, { once: true }); 
            iptalBtn.addEventListener('click', iptalListener, { once: true }); 
        }

        function startResultsCountdown(sonuc) { 
            const popup = ui.sayacPopup; 
            showModal(popup);
            let sayac = 5; 
            const sayacElementi = document.getElementById('gerisayim-sayaci'); 
            sayacElementi.textContent = sayac; 
            const interval = setInterval(() => { 
                sayac--; 
                sayacElementi.textContent = sayac; 
                if (sayac <= 0) { 
                    clearInterval(interval); 
                    hideModal(popup);
                    showSonucSayfasi(sonuc); 
                } 
            }, 1000); 
        }

        function showSonucSayfasi(sonuc) {
            ui.sinavArayuzu.classList.add('hidden');
            ui.sonucArayuzu.classList.remove('hidden');

            const { isim, soyisim, email } = state.currentUser;
            const fullName = (isim && soyisim) ? `${isim.toUpperCase()} ${soyisim.toUpperCase()}` : email.toUpperCase();
            document.getElementById('sonuc-kullanici-ad-soyad').textContent = fullName;
            
            document.getElementById('dogru-sayisi').textContent = sonuc.dogruSayisi;
            document.getElementById('yanlis-sayisi').textContent = sonuc.yanlisSayisi;
            document.getElementById('bos-sayisi').textContent = sonuc.bosSayisi;
            document.getElementById('net-sayisi-buyuk').textContent = sonuc.netSayisi;
            
            sonucOptikFormuCiz(sonuc);
        }

        function sinaviIncelemeModundaBaslat(reviewData) { 
            resetState(); 
            state.isReviewMode = true; 
            state.sonSonuc = reviewData; 
            state.sorular = reviewData.sorular; 
            state.ogrenciCevaplari = reviewData.ogrenciCevaplari; 
            ui.sonucArayuzu.classList.add('hidden'); 
            ui.sinavArayuzu.classList.remove('hidden'); 
            document.getElementById('main-exam-timer').textContent = "ƒ∞NCELEME"; 
            document.getElementById('sinav-sonlandir-btn').classList.add('hidden'); 
            document.getElementById('sonuclara-don-btn').classList.remove('hidden'); 
            ui.sinavPdfIndirBtn.disabled = false; 
            optikFormuCiz(); 
            soruyuEkranaCiz(state.mevcutSoruIndex); 
            cevaplariGoster(); 
        }

        function cevaplariGoster() { 
            state.sorular.forEach(soru => { 
                const ogrenciCevabi = state.ogrenciCevaplari[soru.id]; 
                const dogruCevap = soru.dogruCevap; 
                const dogruLabel = document.querySelector(`#optik-soru-${soru.id} label[for='optik-${soru.id}-${dogruCevap}']`); 
                if (dogruLabel) dogruLabel.classList.add('!bg-green-500', '!border-green-500', '!text-white'); 
                if (ogrenciCevabi && ogrenciCevabi !== dogruCevap) { 
                    const yanlisLabel = document.querySelector(`#optik-soru-${soru.id} label[for='optik-${soru.id}-${ogrenciCevabi}']`); 
                    if (yanlisLabel) yanlisLabel.classList.add('!bg-red-500', '!border-red-500', '!text-white'); 
                } 
            }); 
        }

        function sonucOptikFormuCiz(sonuc) { 
            const container = document.getElementById('optik-form-sonuc'); 
            container.innerHTML = sonuc.sorular.map(soru => { 
                const ogrenciCevabi = sonuc.ogrenciCevaplari[soru.id]; 
                const dogruCevap = soru.dogruCevap; 
                let durumText = '', durumClass = ''; 
                if (!ogrenciCevabi) { 
                    durumText = 'BO≈û'; 
                    durumClass = 'bg-slate-500'; 
                } else if (ogrenciCevabi === dogruCevap) { 
                    durumText = 'DOƒûRU'; 
                    durumClass = 'bg-green-500'; 
                } else { 
                    durumText = 'YANLI≈û'; 
                    durumClass = 'bg-red-500'; 
                } 
                return `<div class="p-3 bg-slate-50 rounded-lg flex items-center gap-4 cursor-pointer hover:bg-slate-100 transition-colors" data-soru-id="${soru.id}">
                        <div class="font-bold text-slate-700 w-16">${soru.id}. Soru</div>
                        <div class="flex-grow flex justify-start gap-2">
                            ${['A', 'B', 'C', 'D', 'E'].map(secenek => {
                                let siniflar = 'w-9 h-9 flex items-center justify-center rounded-full font-semibold border-2 relative';
                                if (secenek === dogruCevap) {
                                    siniflar += ' bg-green-100 border-green-500 text-green-700';
                                } else if (secenek === ogrenciCevabi) {
                                    siniflar += ' bg-red-100 border-red-500 text-red-700';
                                } else {
                                    siniflar += ' bg-white border-slate-200 text-slate-600';
                                }
                                if(secenek === ogrenciCevabi && ogrenciCevabi === dogruCevap){
                                     siniflar += ' ring-2 ring-offset-2 ring-sky-500';
                                }
                                return `<div class="${siniflar}">${secenek}</div>`;
                            }).join('')}
                        </div>
                        <div class="text-white text-xs font-bold px-3 py-1 rounded-full ${durumClass}">${durumText}</div>
                    </div>`; 
            }).join(''); 
        }

        function showSoruDetayPopup(soruId) { 
            const popup = ui.soruDetayPopup; 
            const soru = state.sonSonuc.sorular.find(s => s.id === soruId); 
            const ogrenciCevabi = state.sonSonuc.ogrenciCevaplari[soruId]; 
            const dogruCevap = soru.dogruCevap; 
            document.getElementById('soru-detay-baslik').textContent = `Soru ${soru.id} Detayƒ±`; 
            document.getElementById('soru-detay-metin').innerHTML = soru.metin; 
            const seceneklerContainer = document.getElementById('soru-detay-secenekler'); 
            seceneklerContainer.innerHTML = soru.secenekler.map((secenekMetni, index) => { 
                const secenekHarfi = String.fromCharCode(65 + index); 
                let rowClass = 'flex justify-between items-center p-4 rounded-lg border-2'; 
                let iconHtml = '<span></span>'; 
                const isCorrect = (secenekHarfi === dogruCevap); 
                const isStudentAnswer = (secenekHarfi === ogrenciCevabi); 
                if (isCorrect) { 
                    rowClass += ' bg-green-50 border-green-500'; 
                    iconHtml = '<span class="text-green-600 font-bold text-xl">‚úì</span>'; 
                } else if (isStudentAnswer && !isCorrect) { 
                    rowClass += ' bg-red-50 border-red-500'; 
                    iconHtml = '<span class="text-red-600 font-bold text-xl">‚úó</span>'; 
                } else { 
                    rowClass += ' border-slate-200';
                } 
                return `<li class="${rowClass}"><div><span class="font-bold text-slate-800 mr-2">${secenekHarfi})</span><span class="text-slate-700">${secenekMetni}</span></div>${iconHtml}</li>`; 
            }).join(''); 
            showModal(popup);
        }

        function sorulariPDFIndir(forceDownload = false) {
            const canDownload = state.sinavAktif || forceDownload || state.isReviewMode;
            if (!canDownload || !state.sorular || state.sorular.length === 0) {
                alert("Yazdƒ±rmak i√ßin ge√ßerli bir sƒ±nav verisi bulunmalƒ±dƒ±r.");
                return;
            }
            const { isim, soyisim, email } = state.currentUser;
            const ogrenciAdi = (isim && soyisim) ? `${isim} ${soyisim}` : email;
            const sinavBasligi = `√áƒ±kmƒ±≈ü Sorular Sƒ±nav Kitap√ßƒ±ƒüƒ±`;
            const tarih = new Date().toLocaleDateString('tr-TR');
            const printStyles = `<style>@page{size:A4;margin:20mm 15mm}body{font-family:'Carlito',Calibri,sans-serif;color:#333}.main-header{text-align:center;border-bottom:2px solid #333;padding-bottom:10px;margin-bottom:15px;page-break-after:avoid}.main-header h1{font-size:22px;margin:0 0 5px 0;color:#111;font-weight:700}.main-header p{font-size:12px;margin:0;color:#555}.content{column-count:2;column-gap:15mm;column-rule:1px solid #ccc}.question-block{page-break-inside:avoid;-webkit-column-break-inside:avoid;break-inside:avoid;margin-bottom:14px}.question-title{font-size:11.5px;font-weight:700;color:#000;line-height:1.5;margin-bottom:8px}.options-list{padding-left:5px;font-size:11px;line-height:1.5}.option-item{margin-bottom:5px}.option-item strong{font-weight:700}.page-footer{position:fixed;bottom:10mm;left:15mm;right:15mm;text-align:center;font-size:10px;color:#888}.page-number::after{content:counter(page)}</style>`;
            let headerHTML = `<div class="main-header"><h1>${sinavBasligi}</h1><p>√ñƒürenci: ${ogrenciAdi} &nbsp;&nbsp;|&nbsp;&nbsp; Tarih: ${tarih}</p></div>`;
            let contentHTML = '<div class="content">';
            state.sorular.forEach((soru, index) => {
                const soruMetni = soru.metin.replace(/<[^>]*>?/gm, '');
                contentHTML += `<div class="question-block"><div class="question-title">${index + 1}. ${soruMetni}</div><div class="options-list">`;
                soru.secenekler.forEach((secenek, i) => {
                    const harf = String.fromCharCode(65 + i);
                    const secenekMetni = secenek.replace(/<[^>]*>?/gm, '');
                    contentHTML += `<div class="option-item"><strong>${harf})</strong> ${secenekMetni}</div>`;
                });
                contentHTML += `</div></div>`;
            });
            contentHTML += `</div>`;
            let footerHTML = `<div class="page-footer"><span class="page-number"></span></div>`;
            const printWindow = window.open('', '', 'height=800,width=800');
            printWindow.document.write(`<html><head><title>${sinavBasligi} - ${ogrenciAdi}</title>${printStyles}</head><body>${headerHTML}${contentHTML}${footerHTML}</body></html>`);
            printWindow.document.close();
            setTimeout(() => { printWindow.focus(); printWindow.print(); printWindow.close(); }, 500);
        }
    </script>
</body>
</html>









